{% extends "base.html" %}
{% block content %}

<div class="page-card">

    <h2 style="text-align:center; color:#6a0dad;">Buy Data Bundle</h2>

    <!-- Wallet Balance -->
    <p style="text-align:center; font-weight:bold; color:#333; margin-bottom:20px;">
        Wallet Balance: ₵ {{ wallet }}
    </p>

    <!-- Messages -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="POST">
        {% csrf_token %}

        <label>Select Bundle</label>
        <select name="bundle_id" required>
            <option value="" disabled selected>-- Choose a bundle --</option>
            {% for b in bundles %}
                <option value="{{ b.id }}">
                    {{ b.network }} • {{ b.name }} — ₵ {{ b.price }}
                    {% if b.send_via_api %}(API){% else %}(Admin){% endif %}
                </option>
            {% endfor %}
        </select>

        <label>Recipient Phone</label>
        <input type="text" name="recipient" placeholder="Enter recipient phone" required>

        <button class="btn-primary">Buy Bundle</button>
    </form>
</div>

<style>
.page-card {
    max-width: 95%;
    width: 600px;
    margin:20px auto;
    background:#fff;
    padding:20px;
    border-radius:14px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

.page-card label {
    display:block;
    margin-bottom:5px;
    font-weight:bold;
    color:#333;
}

.page-card select, .page-card input {
    width:100%;
    padding:10px;
    margin-bottom:15px;
    border:1px solid #ccc;
    border-radius:6px;
    font-size:15px;
}

.btn-primary {
    background:#6a0dad;
    color:white;
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    margin-top:10px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
}
.btn-primary:hover { background:#501393; transform:scale(1.02); }

/* Messages */
.alert {
    padding:10px 15px;
    border-radius:8px;
    margin-bottom:15px;
    font-weight:bold;
    text-align:center;
}
.alert.success { background:#d4edda; color:#155724; }
.alert.error { background:#f8d7da; color:#721c24; }

@media(max-width:600px){
    .page-card { width:95%; padding:15px; }
    select, input, button { font-size:14px; padding:10px; }
}
</style>

{% endblock %}
