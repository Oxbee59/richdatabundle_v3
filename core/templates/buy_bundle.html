{% extends "base.html" %}
{% block content %}

<div class="page-card">

    <h2 style="text-align:center; color:#6a0dad;">Buy Bundle</h2>

    <div class="wallet-box" style="
        background:#f8f1ff;
        padding:12px;
        border-radius:8px;
        text-align:center;
        font-weight:bold;
        color:#520a9e;
        margin-bottom:20px;
    ">
        Wallet Balance: GHS {{ wallet }}
    </div>

    <form method="POST">
        {% csrf_token %}
        <input type="hidden" id="bundle_id" name="bundle_id" required>

        <label>Recipient Number</label>
        <input type="text" name="recipient" required
               style="width:100%; padding:10px; border-radius:6px; margin-top:5px; margin-bottom:15px; border:1px solid #ccc;">

        <label>Select Bundle</label>
        <select id="bundle_select" required
                style="width:100%; padding:12px; border-radius:8px; border:1px solid #ccc; margin-top:5px; margin-bottom:20px;">
            <option value="" disabled selected>-- Choose a bundle --</option>
            {% for b in bundles %}
                <option value="{{ b.id }}">
                    {{ b.network }} • {{ b.name }} — GHS {{ b.price }}
                    {% if b.is_api %}(API){% else %}(Admin){% endif %}
                </option>
            {% endfor %}
        </select>

        <button class="btn-primary">Buy Bundle</button>
    </form>
</div>

<style>
.page-card {
    max-width: 95%;
    width: 600px;
    margin:20px auto;
    background:#fff;
    padding:20px;
    border-radius:14px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

.btn-primary {
    background:#6a0dad;
    color:white;
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    margin-top:20px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
}
.btn-primary:hover { background:#501393; transform:scale(1.02); }

@media(max-width:600px){
    .page-card { width:95%; padding:15px; }
    input, button, select { font-size:14px; padding:10px; }
}
</style>

<script>
document.getElementById("bundle_select").addEventListener("change", function() {
    document.getElementById("bundle_id").value = this.value;
});
</script>

{% endblock %}
