{% extends "base.html" %}
{% block content %}

<div class="page-card">

    <h2 style="text-align:center; color:#6a0dad;">Buy Data Bundle</h2>

    <!-- Wallet Balance -->
    <p class="wallet-box">Wallet Balance: <strong>₵ {{ wallet }}</strong></p>

    <!-- Messages -->
    {% if messages %}
        <div class="msg-container">
            {% for message in messages %}
                <div class="alert {% if message.tags %}{{ message.tags }}{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <form method="POST">
        {% csrf_token %}

        <label>Select Bundle</label>
        <select name="bundle_id" required class="input">
            <option value="" disabled selected>-- Choose a bundle --</option>
            {% for b in bundles %}
                <option value="{{ b.id }}">
                    {{ b.network }} • {{ b.name }} — ₵ {{ b.price }}
                    {% if b.send_via_api %}(API){% else %}(Admin){% endif %}
                </option>
            {% endfor %}
        </select>

        <label>Recipient Phone</label>
        <input type="text" name="recipient" placeholder="Enter recipient phone" required class="input">

        <button class="btn-primary">Buy Bundle</button>
    </form>
</div>

<style>
.page-card {
    max-width: 95%;
    width: 600px;
    margin:20px auto;
    background:#fff;
    padding:20px;
    border-radius:14px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

.input {
    width:100%; padding:10px; border-radius:6px;
    margin-bottom:15px; border:1px solid #ccc;
}

.wallet-box {
    background:#f7f3ff;
    padding:10px 15px;
    border-radius:8px;
    border-left:5px solid #6a0dad;
    margin-bottom:20px;
    font-size:15px;
    text-align:center;
    font-weight:bold;
}

.btn-primary {
    background:#6a0dad;
    color:white;
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    margin-top:10px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
}
.btn-primary:hover { background:#501393; transform:scale(1.02); }

/* Message styling */
.msg-container { margin-bottom: 20px; }

.alert {
    padding: 12px 15px;
    border-radius: 8px;
    font-size: 15px;
    margin-bottom: 10px;
    animation: fadeIn 0.4s ease-in-out;
    text-align:center;
}

.alert.success {
    background: #e8ffe8;
    border-left: 5px solid #3cb043;
    color: #246b2c;
}

.alert.error {
    background: #ffeaea;
    border-left: 5px solid #d9534f;
    color: #a94442;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

@media(max-width:600px){
    .page-card { width:95%; padding:15px; }
    input, button, select { font-size:14px; padding:10px; }
}
</style>

{% endblock %}
